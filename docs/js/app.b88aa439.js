(function(e){function t(t){for(var o,i,c=t[0],u=t[1],s=t[2],l=0,m=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d0baaed":"97d19c9a","chunk-2d0ceeb6":"0ffbe34c","chunk-2d0e95df":"941c5227","chunk-5dcf2ce7":"b28e7720","chunk-d6265162":"fd3c9860"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=o);var r,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var s=new Error;r=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,n[1](s)}a[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:u})}),12e4);u.onerror=u.onload=r,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://cdn.jsdelivr.net/gh/lhlyu/horae@master/docs/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2938:function(e,t,n){"use strict";var o=n("d66b"),a=n.n(o);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i={name:"app"},c=i,u=(n("5c0b"),n("2877")),s=Object(u["a"])(c,a,r,!1,null,null,null),l=s.exports,d=n("2f62"),m=n("0e44"),f=(n("c975"),n("b0c0"),n("0347")),p="/admin/board",h={to:"",name:"管理"},b=function e(t,n,o){for(var a=0,r=t.length;a<r;a++)-1!=n.indexOf(t[a].path)&&o(t[a]),t[a].children&&t[a].children.length&&e(t[a].children,n,o)},v={state:{fold:Object(f["a"])().apple.phone,breadcrumbItems:[h],menuItems:[],activeMenu:p,isLoading:!1},getters:{},mutations:{SET_FOLDER:function(e,t){e.fold=t},SET_BREADCRUMBITEMS:function(e,t){e.breadcrumbItems=t},SET_MENULIST:function(e,t){e.menuItems=t},SET_ACTIVEMENU:function(e,t){t&&""!=t||(t=p);var n=[h];b(e.menuItems,t,(function(e){n.push({to:e.path,name:e.name})})),e.breadcrumbItems=n,e.activeMenu=t},SET_LOADING:function(e,t){e.isLoading=t}},actions:{SET_MENULIST:function(e,t){var n=e.commit;n("SET_MENULIST",t)}}},g=(n("96cf"),n("1da1")),E=(n("d3b7"),n("bc3a")),_=n.n(E),O=n("a78e"),T=n.n(O),w=n("323e"),S=n.n(w),k=n("5c96"),y=n.n(k);_.a.defaults.timeout=1e4,_.a.interceptors.request.use((function(e){return S.a.start(),e.headers["Content-Type"]="application/json;charset=UTF-8",T.a.get("access_token")&&(e.headers.Authorization="Bearer"+T.a.get("access_token")),e}),(function(e){return Object(k["Message"])({message:e.response.data.message,type:"warning"}),Promise.resolve({code:-1,message:"error",data:null})})),_.a.interceptors.response.use((function(e){return S.a.done(),e.data?Promise.resolve(e.data):Promise.resolve({code:1,message:"failure",data:null})}),(function(e){return 404===e.response.status?Object(k["Message"])({message:"请求地址出错",type:"warning"}):Object(k["Message"])({message:e.response.data.message,type:"warning"}),Promise.resolve({code:-1,message:"error",data:null})}));var A=_.a,j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return{u:e,m:t}},R={LoginApi:j("/api/login"),RoleApi:j("/api/admin/roles"),EditRoleApi:j("/api/admin/role","post"),DelRoleApi:j("/api/admin/role","delete"),PowerApi:j("/api/admin/powers","get")},x="",L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return A.request({url:e,method:t,baseURL:x,data:n})},M={fetchLogin:function(){return L(R.LoginApi.u,R.LoginApi.m)},fetchRoles:function(e){return L(R.RoleApi.u,R.RoleApi.m,e)},fetchEditRole:function(e){return L(R.EditRoleApi.u,R.EditRoleApi.m,e)},fetchDelRole:function(e){return L(R.DelRoleApi.u,R.DelRoleApi.m,e)},fetchPowers:function(){return L(R.PowerApi.u,R.PowerApi.m)}},I={state:{codes:[]},getters:{},mutations:{SET_CODES:function(e,t){e.codes=t}},actions:{SET_CODES:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,M.fetchLogin();case 3:o=t.sent,o.then((function(e){e.code?n("SET_CODES",[]):n("SET_CODES",e.data.codes)}));case 5:case"end":return t.stop()}}),t)})))()}}};o["default"].use(d["a"]);var C=new d["a"].Store({state:{routers:null,token:null},getters:{getToken:function(e){return e.token}},mutations:{SET_ROUTERS:function(e,t){e.routers=t},SET_TOKEN:function(e,t){e.token=t,window.sessionStorage.setItem("token",t)}},actions:{addTab:function(e,t){var n=e.commit;n("addTab",t)}},modules:{layout:v,user:I},plugins:[Object(m["a"])({storage:window.sessionStorage,reducer:function(e){return{layout:e.layout,user:e.user}}})]}),D=n("8c4f"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{on:{click:e.login}},[e._v("默认按钮")])],1)},N=[],$=n("5530"),U=(n("99af"),n("a434"),n("2909")),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{staticClass:"u-transition",class:e.fold?"u-fold":"",attrs:{width:"250px"}},[n("ASide")],1),n("el-container",{staticClass:"u-transition"},[n("el-header",[n("Header")],1),n("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadcrumbItems,(function(t,o){return n("el-breadcrumb-item",{key:o},[e._v(e._s(t.name))])})),1),n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[n("keep-alive",[n("router-view")],1)],1),n("el-footer",[n("Footer")],1)],1)],1)},q=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"u-header"},[n("div",{staticClass:"u-header__left"},[n("i",{staticClass:"el-icon-s-fold u-transition",class:e.fold?"u-rotate-180":"",on:{click:e.triggerFold}})]),n("div",{staticClass:"u-header__right"})])},B=[],K={name:"index",methods:Object($["a"])({},Object(d["b"])({triggerFold:function(e){e("SET_FOLDER",!this.fold)}})),computed:Object($["a"])({},Object(d["c"])({fold:function(e){return e.layout.fold}}))},V=K,z=Object(u["a"])(V,H,B,!1,null,null,null),J=z.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.items,(function(t,o){return n("el-menu",{key:o,staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeMenu,router:!0},on:{select:e.selectHandler}},[t.children&&t.children.length?n("el-submenu",{attrs:{index:t.path}},[n("template",{slot:"title"},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t,o){return n("el-menu-item",{key:o,attrs:{index:t.path}},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])])}))],2):n("el-menu-item",{attrs:{index:t.path}},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])])],1)})),1)},Q=[],W={name:"index",data:function(){return{}},methods:Object($["a"])({},Object(d["b"])({selectHandler:function(e,t){e("SET_ACTIVEMENU",t)}})),computed:Object($["a"])({},Object(d["c"])({items:function(e){return e.layout.menuItems},activeMenu:function(e){return e.layout.activeMenu}}))},X=W,Y=Object(u["a"])(X,G,Q,!1,null,null,null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},te=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("© 2020 Lhlyu · 虚无缥缈 时过云烟")])])}],ne={name:"index"},oe=ne,ae=Object(u["a"])(oe,ee,te,!1,null,"1a481871",null),re=ae.exports,ie={name:"layout",components:{Header:J,ASide:Z,Footer:re},mounted:function(){},computed:Object($["a"])({},Object(d["c"])({breadcrumbItems:function(e){return e.layout.breadcrumbItems},fold:function(e){return e.layout.fold},isLoading:function(e){return e.layout.isLoading}}))},ce=ie,ue=(n("2938"),Object(u["a"])(ce,F,q,!1,null,null,null)),se=ue.exports,le=function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},de=function(e){var t=[{path:"/admin",name:"layout",component:se,redirect:"/admin/board",children:e},{path:"*",name:"404",component:le}];return Te.concat(t)},me=function(e){if(!e.length)return[];function t(e,n){for(var o=0;o<e.length;o++)-1==n.indexOf(e[o].code)&&(e.splice(o,1),o=0!==o?o-1:o),e[o].children&&e[o].children.length&&t(e[o].children,n)}var n=Object(U["a"])(we);return t(n,e),n},fe={name:"index",methods:Object($["a"])({},Object(d["b"])({login:function(e){var t=this,n=this.$request.fetchLogin();n.then((function(n){if(!n.code){e("SET_CODES",n.data.codes);var o=me(n.data.codes);if(o.length){var a=de(o);e("SET_MENULIST",o),e("SET_TOKEN",+new Date),e("SET_ROUTERS",a),e("SET_ACTIVEMENU"),t.$router.addRoutes(a),t.$router.push({path:"/admin"})}}}))}})),computed:{}},pe=fe,he=Object(u["a"])(pe,P,N,!1,null,null,null),be=he.exports,ve=function(){return n.e("chunk-2d0ceeb6").then(n.bind(null,"6204"))},ge=function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},Ee=function(){return n.e("chunk-2d0baaed").then(n.bind(null,"37f9"))},_e=function(){return n.e("chunk-5dcf2ce7").then(n.bind(null,"0f69"))},Oe=function(){return n.e("chunk-d6265162").then(n.bind(null,"d78e"))},Te=[{path:"/",name:"登录",component:be},{path:"*",name:"notfound",component:ge}],we=[{code:10,path:"/admin/board",name:"首页",icon:"el-icon-house",component:Ee},{code:12,path:"/admin/permission",name:"权限",icon:"el-icon-s-operation",redirect:"/admin/permission/user",component:ve,children:[{code:1201,path:"/admin/permission/user",name:"用户",component:_e},{code:1202,path:"/admin/permission/role",name:"角色",component:Oe}]}];o["default"].use(D["a"]);var Se=new D["a"]({routes:Te});Se.beforeEach((function(e,t,n){if(!C.state.token){var o=window.sessionStorage.getItem("token");if(o){var a=me(C.state.user.codes),r=de(a);C.commit("SET_TOKEN",o),C.commit("SET_MENULIST",a),C.commit("SET_ROUTERS",r),Se.addRoutes(r),n(e.path)}}n()}));var ke=Se;o["default"].prototype.$isMobile=Object(f["a"])().phone,o["default"].prototype.$request=M,o["default"].mixin({components:{},data:function(){return{}},mounted:function(){var e=this;this.$nextTick((function(){e.initData(),e.init()}))},methods:{initData:function(){},init:function(){},scrollTop:function(e,t){window.scrollTo({top:t||0,behavior:"smooth"}),e&&setTimeout((function(){e()}),this.$isMobile?0:400)}}});var ye=n("96eb"),Ae=n.n(ye),je=function(e){var t=e.mock;t&&(Ae.a.setup({timeout:"200-1000"}),Ae.a.mock(R.LoginApi.u,R.LoginApi.m,{code:0,message:"success",data:{codes:[10,12,1201,1202,120201,120202,120203],name:"lhlyu"}}))},Re=function(e){var t=e.mock;t&&(Ae.a.setup({timeout:"200-1000"}),Ae.a.mock(R.RoleApi.u,R.RoleApi.m,{code:0,message:"success",data:{page:{pageNum:1,pageSize:10,total:2},list:[{id:1,name:"管理者",remark:"普通管理者",enable:0,powers:[10,12,1201,1202,120201,120202],"createdAt|1591252800000-1591252842060":0,updatedAt:+new Date-6e3},{id:2,name:"测试者",remark:"测试者",enable:0,powers:[10],"createdAt|1591252800000-1591252842060":0,updatedAt:+new Date-12e3},{id:1,name:"超级测试者",remark:"测试者",enable:0,powers:[10,12,1201,1202,120201,120202,120203],"createdAt|1591252800000-1591252842060":0,updatedAt:+new Date-6e3}]}}),Ae.a.mock(R.EditRoleApi.u,R.EditRoleApi.m,{code:0,message:"success",data:null}),Ae.a.mock(R.DelRoleApi.u,R.DelRoleApi.m,{code:0,message:"success",data:null}),Ae.a.mock(R.PowerApi.u,R.PowerApi.m,{code:0,message:"success",data:[{id:10,name:"首页"},{id:12,name:"权限"},{id:1201,name:"用户"},{id:1202,name:"角色"},{id:120201,name:"角色添加"},{id:120202,name:"角色删除"},{id:120203,name:"角色更改"}]}))};je({mock:!0}),Re({mock:!0});n("a630"),n("caad"),n("a15b"),n("baa5"),n("d81d"),n("13d5"),n("fb6a"),n("a9e3"),n("7039"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("2532"),n("3ca3"),n("466d"),n("5319"),n("841c"),n("1276"),n("ddb0"),navigator.userAgent.toLowerCase();var xe=function(e,t){return-1!=e.indexOf(t)};o["default"].directive("power",{inserted:function(e,t){var n=t.value;n&&(xe(C.state.user.codes,n)||e.parentNode&&e.parentNode.removeChild(e))}}),o["default"].use(y.a),o["default"].config.productionTip=!1,new o["default"]({store:C,router:ke,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),a=n.n(o);a.a},"9c0c":function(e,t,n){},d66b:function(e,t,n){}});
//# sourceMappingURL=app.b88aa439.js.map