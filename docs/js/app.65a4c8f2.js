(function(e){function t(t){for(var a,i,c=t[0],u=t[1],s=t[2],l=0,m=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-019e58c6":"a0385ba7","chunk-2d0baaed":"8b53b63d","chunk-2d0ceeb6":"72b31e45","chunk-2d0e95df":"93e101d5","chunk-41800d16":"80999f69"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=a);var r,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var s=new Error;r=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",s.name="ChunkLoadError",s.type=a,s.request=r,n[1](s)}o[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:u})}),12e4);u.onerror=u.onload=r,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://cdn.jsdelivr.net/gh/lhlyu/horae@master/docs/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"286b":function(e,t,n){"use strict";var a=n("e6f4"),o=n.n(a);o.a},2938:function(e,t,n){"use strict";var a=n("d66b"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i={name:"app"},c=i,u=(n("5c0b"),n("2877")),s=Object(u["a"])(c,o,r,!1,null,null,null),l=s.exports,d=n("2f62"),m=n("0e44"),f=(n("c975"),n("b0c0"),n("0347")),p="/admin/board",h={to:"",name:"管理"},v=function e(t,n,a){for(var o=0,r=t.length;o<r;o++)-1!==n.indexOf(t[o].path)&&a(t[o]),t[o].children&&t[o].children.length&&e(t[o].children,n,a)},b={state:{fold:Object(f["a"])().apple.phone,breadcrumbItems:[h],menuItems:[],activeMenu:p,isLoading:!1},getters:{},mutations:{SET_FOLDER:function(e,t){e.fold=t},SET_BREADCRUMBITEMS:function(e,t){e.breadcrumbItems=t},SET_MENULIST:function(e,t){e.menuItems=t},SET_ACTIVEMENU:function(e,t){t&&""!==t||(t=p);var n=[h];v(e.menuItems,t,(function(e){n.push({to:e.path,name:e.name})})),e.breadcrumbItems=n,e.activeMenu=t},SET_LOADING:function(e,t){e.isLoading=t}},actions:{SET_MENULIST:function(e,t){var n=e.commit;n("SET_MENULIST",t)}}},g=(n("96cf"),n("1da1")),_=(n("d3b7"),n("bc3a")),E=n.n(_),T=n("a78e"),O=n.n(T),S=n("323e"),w=n.n(S),k=n("5c96"),A=n.n(k);E.a.defaults.timeout=1e4,E.a.interceptors.request.use((function(e){return w.a.start(),C.commit("SET_LOADING",!0),e.headers["Content-Type"]="application/json;charset=UTF-8",O.a.get("access_token")&&(e.headers.Authorization="Bearer"+O.a.get("access_token")),e}),(function(e){return k["Message"].error(e.response.data.message),Promise.resolve({code:-1,message:"error",data:null})})),E.a.interceptors.response.use((function(e){return w.a.done(),C.commit("SET_LOADING",!1),e.data?Promise.resolve(e.data):Promise.resolve({code:1,message:"failure",data:null})}),(function(e){return k["Message"].error(e.response.data.message),Promise.resolve({code:-1,message:"error",data:null})}));var y=E.a,R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return{u:e,m:t}},j={LoginApi:R("/api/login"),RoleApi:R("/api/admin/roles"),EditRoleApi:R("/api/admin/role","post"),DelRoleApi:R("/api/admin/role","delete"),DelRolesApi:R("/api/admin/roles","delete"),PowerApi:R("/api/admin/powers","get"),PowerTreeApi:R("/api/admin/power-tree","get")},x="",L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return y.request({url:e,method:t,baseURL:x,data:n})},D={fetchLogin:function(){return L(j.LoginApi.u,j.LoginApi.m)},fetchRoles:function(e){return L(j.RoleApi.u,j.RoleApi.m,e)},fetchEditRole:function(e){return L(j.EditRoleApi.u,j.EditRoleApi.m,e)},fetchDelRole:function(e){return L(j.DelRoleApi.u,j.DelRoleApi.m,e)},fetchDelRoles:function(e){return L(j.DelRolesApi.u,j.DelRolesApi.m,e)},fetchPowers:function(){return L(j.PowerApi.u,j.PowerApi.m)},fetchPowerTree:function(){return L(j.PowerTreeApi.u,j.PowerTreeApi.m)}},P={state:{codes:[]},getters:{},mutations:{SET_CODES:function(e,t){e.codes=t}},actions:{SET_CODES:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,D.fetchLogin();case 3:a=t.sent,a.then((function(e){e.code?n("SET_CODES",[]):n("SET_CODES",e.data.codes)}));case 5:case"end":return t.stop()}}),t)})))()}}};a["default"].use(d["a"]);var C=new d["a"].Store({state:{routers:null,token:null},getters:{getToken:function(e){return e.token}},mutations:{SET_ROUTERS:function(e,t){e.routers=t},SET_TOKEN:function(e,t){e.token=t,window.sessionStorage.setItem("token",t)}},actions:{addTab:function(e,t){var n=e.commit;n("addTab",t)}},modules:{layout:b,user:P},plugins:[Object(m["a"])({storage:window.sessionStorage,reducer:function(e){return{layout:e.layout,user:e.user}}})]}),I=n("8c4f"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"u-login"},[n("el-button",{directives:[{name:"throttling",rawName:"v-throttling",value:e.loginThrottling,expression:"loginThrottling"}]},[e._v("默认按钮")]),n("Plate")],1)},N=[],$=n("5530"),U=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"u-plate"},[n("div",{staticClass:"u-plate__left"},[e._v(" 莫听穿林打叶声，何妨吟啸且徐行。竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生。 料峭春风吹酒醒，微冷，山头斜照却相迎。回首向来萧瑟处，归去，也无风雨也无晴。 ")]),n("div",{staticClass:"u-plate__center"}),n("div",{staticClass:"u-plate__right"})])}],q={name:"index",data:function(){return{}},methods:{}},z=q,H=(n("ceff"),Object(u["a"])(z,U,F,!1,null,null,null)),B=H.exports,G=(n("99af"),n("a434"),n("2909")),J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{staticClass:"u-transition",class:e.fold?"u-fold":"",attrs:{width:"250px"}},[n("ASide")],1),n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"u-transition"},[n("el-header",[n("Header")],1),n("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadcrumbItems,(function(t,a){return n("el-breadcrumb-item",{key:a},[e._v(e._s(t.name))])})),1),n("el-main",[n("keep-alive",[n("router-view")],1)],1),n("el-footer",[n("Footer")],1)],1)],1)},K=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"u-header"},[n("div",{staticClass:"u-header__left"},[n("i",{staticClass:"el-icon-s-fold u-transition",class:e.fold?"u-rotate-180":"",on:{click:e.triggerFold}})]),n("div",{staticClass:"u-header__right"})])},Q=[],W={name:"index",methods:Object($["a"])({},Object(d["b"])({triggerFold:function(e){e("SET_FOLDER",!this.fold)}})),computed:Object($["a"])({},Object(d["c"])({fold:function(e){return e.layout.fold}}))},X=W,Y=Object(u["a"])(X,V,Q,!1,null,null,null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.items,(function(t,a){return n("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeMenu,router:!0},on:{select:e.selectHandler}},[t.children&&t.children.length?n("el-submenu",{attrs:{index:t.path}},[n("template",{slot:"title"},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t,a){return n("el-menu-item",{key:a,attrs:{index:t.path}},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])])}))],2):n("el-menu-item",{attrs:{index:t.path}},[t.icon?n("i",{class:t.icon}):e._e(),n("span",[e._v(e._s(t.name))])])],1)})),1)},te=[],ne={name:"index",data:function(){return{}},methods:Object($["a"])({},Object(d["b"])({selectHandler:function(e,t){e("SET_ACTIVEMENU",t)}})),computed:Object($["a"])({},Object(d["c"])({items:function(e){return e.layout.menuItems},activeMenu:function(e){return e.layout.activeMenu}}))},ae=ne,oe=(n("286b"),Object(u["a"])(ae,ee,te,!1,null,null,null)),re=oe.exports,ie=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("© 2020 Lhlyu · 虚无缥缈 时过云烟")])])}],ue={name:"index"},se=ue,le=Object(u["a"])(se,ie,ce,!1,null,"1a481871",null),de=le.exports,me={name:"layout",components:{Header:Z,ASide:re,Footer:de},mounted:function(){},computed:Object($["a"])({},Object(d["c"])({breadcrumbItems:function(e){return e.layout.breadcrumbItems},fold:function(e){return e.layout.fold},isLoading:function(e){return e.layout.isLoading}}))},fe=me,pe=(n("2938"),Object(u["a"])(fe,J,K,!1,null,null,null)),he=pe.exports,ve=function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},be=function(e){var t=[{path:"/admin",name:"layout",component:he,redirect:"/admin/board",children:e},{path:"*",name:"404",component:ve}];return Re.concat(t)},ge=function(e){if(!e.length)return[];function t(e,n){for(var a=0;a<e.length;a++)-1===n.indexOf(e[a].code)&&(e.splice(a,1),a=0!==a?a-1:a),e[a].children&&e[a].children.length&&t(e[a].children,n)}var n=Object(G["a"])(je);return t(n,e),n},_e={name:"index",components:{Plate:B},data:function(){return{loginThrottling:{callback:this.login,time:2e3}}},methods:Object($["a"])({},Object(d["b"])({login:function(e){var t=this,n=this.$request.fetchLogin();n.then((function(n){if(!n.code){e("SET_CODES",n.data.codes);var a=ge(n.data.codes);if(a.length){var o=be(a);e("SET_MENULIST",a),e("SET_TOKEN",+new Date),e("SET_ROUTERS",o),e("SET_ACTIVEMENU"),t.$router.addRoutes(o),t.$router.push({path:"/admin"})}}}))}})),computed:{}},Ee=_e,Te=Object(u["a"])(Ee,M,N,!1,null,null,null),Oe=Te.exports,Se=function(){return n.e("chunk-2d0ceeb6").then(n.bind(null,"6204"))},we=function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},ke=function(){return n.e("chunk-2d0baaed").then(n.bind(null,"37f9"))},Ae=function(){return n.e("chunk-41800d16").then(n.bind(null,"0f69"))},ye=function(){return n.e("chunk-019e58c6").then(n.bind(null,"d78e"))},Re=[{path:"/",name:"登录",component:Oe},{path:"*",name:"notfound",component:we}],je=[{code:10,path:"/admin/board",name:"首页",icon:"el-icon-house",component:ke},{code:12,path:"/admin/permission",name:"权限",icon:"el-icon-s-operation",redirect:"/admin/permission/user",component:Se,children:[{code:1201,path:"/admin/permission/user",name:"用户",component:Ae},{code:1202,path:"/admin/permission/role",name:"角色",component:ye}]}];a["default"].use(I["a"]);var xe=new I["a"]({routes:Re});xe.beforeEach((function(e,t,n){if(!C.state.token){var a=window.sessionStorage.getItem("token");if(a){var o=ge(C.state.user.codes),r=be(o);C.commit("SET_TOKEN",a),C.commit("SET_MENULIST",o),C.commit("SET_ROUTERS",r),xe.addRoutes(r),n(e.path)}}n()}));var Le=xe;a["default"].prototype.$isMobile=Object(f["a"])().phone,a["default"].prototype.$request=D,a["default"].mixin({components:{},data:function(){return{}},mounted:function(){var e=this;this.$nextTick((function(){e.initData(),e.init()}))},methods:{initData:function(){},init:function(){},scrollTop:function(e,t){window.scrollTo({top:t||0,behavior:"smooth"}),e&&setTimeout((function(){e()}),this.$isMobile?0:400)}}});var De=n("96eb"),Pe=n.n(De),Ce=function(e){var t=e.mock;t&&(Pe.a.setup({timeout:"200000-1000000"}),Pe.a.mock(j.LoginApi.u,j.LoginApi.m,{code:0,message:"success",data:{codes:[10,12,1201,1202,120201,120202,120203],name:"lhlyu"}}))},Ie=function(e){var t=e.mock;t&&(Pe.a.setup({timeout:"200-1000"}),Pe.a.mock(j.RoleApi.u,j.RoleApi.m,(function(e){var t=JSON.parse(e.body);console.log("req:",t);for(var n=[],a=0;a<t.pageSize;a++){var o={"id|+1":1,name:"管理者"+a,remark:Pe.a.Random.cname(),enable:0,powers:[10,12,1201,1202,120201,120202],createdAt:Pe.a.Random.natural(1582969294016,1589017294016),updatedAt:Pe.a.Random.natural(1589017294016,1591609294016)};t.value.length&&(o.name=t.value),n.push(o)}return{code:0,message:"success",data:{page:{pageNum:t.pageNum,pageSize:t.pageSize,total:1e3},list:n}}})),Pe.a.mock(j.EditRoleApi.u,j.EditRoleApi.m,{code:0,message:"success",data:null}),Pe.a.mock(j.DelRoleApi.u,j.DelRoleApi.m,{code:0,message:"success",data:null}),Pe.a.mock(j.DelRolesApi.u,j.DelRolesApi.m,{code:0,message:"success",data:null}),Pe.a.mock(j.PowerApi.u,j.PowerApi.m,{code:0,message:"success",data:[{id:10,name:"首页"},{id:12,name:"权限"},{id:1201,name:"用户"},{id:1202,name:"角色"},{id:120201,name:"角色添加"},{id:120202,name:"角色删除"},{id:120203,name:"角色更改"}]}),Pe.a.mock(j.PowerTreeApi.u,j.PowerTreeApi.m,{code:0,message:"success",data:[{id:10,name:"首页"},{id:12,name:"权限",children:[{id:1201,name:"用户"},{id:1202,name:"角色",children:[{id:120201,name:"角色添加"},{id:120202,name:"角色删除"},{id:120203,name:"角色更改"}]}]}]}))},Me=!0;Ce({mock:Me}),Ie({mock:Me});n("a630"),n("a15b"),n("baa5"),n("d81d"),n("13d5"),n("fb6a"),n("a9e3"),n("7039"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("466d"),n("5319"),n("841c"),n("1276"),n("ddb0"),navigator.userAgent.toLowerCase();var Ne=function(e,t){return-1!=e.indexOf(t)};a["default"].directive("power",{inserted:function(e,t){var n=t.value;n&&(Ne(C.state.user.codes,n)||e.parentNode&&e.parentNode.removeChild(e))}}),a["default"].directive("throttling",{inserted:function(e,t){var n=t.value,a=n.callback,o=n.time;e.callback=a,e.time=o,e.addEventListener("click",(function(){var t=(new Date).getTime();!e.preTime||t-e.preTime>e.time?(e.preTime=t,e.callback()):k["Message"].warning("请求太频繁，休息一下~")}))},update:function(e,t){var n=t.value,a=n.callback,o=n.time;e.callback=a,e.time=o}}),a["default"].use(A.a),a["default"].config.productionTip=!1,new a["default"]({store:C,router:Le,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),o=n.n(a);o.a},"9c0c":function(e,t,n){},ceff:function(e,t,n){"use strict";var a=n("dc79"),o=n.n(a);o.a},d66b:function(e,t,n){},dc79:function(e,t,n){},e6f4:function(e,t,n){}});
//# sourceMappingURL=app.65a4c8f2.js.map